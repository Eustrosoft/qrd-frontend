<text-avatar [text]="selectors.authInfo()?.username ?? ''" />
@if (!isXSmall()) {
  <ui-flex-block gapSize="0" flexDirection="column" ellipsis>
    @if (!selectors.isAuthInfoLoading()) {
      @if (selectors.authInfo()?.organization) {
        <p ellipsis>{{ selectors.authInfo()?.organization }}</p>
      }
      <p ellipsis>
        {{ selectors.authInfo()?.username ?? '' }}
      </p>
    } @else {
      <ui-skeleton width="108" height="48" />
    }
  </ui-flex-block>
}
<button
  (click)="openOverlay()"
  class="icon-button-sm"
  mat-icon-button
  cdkOverlayOrigin
  #trigger="cdkOverlayOrigin"
  [attr.aria-label]="HeaderLocalization.openProfileMenu"
>
  <mat-icon class="icon-primary" svgIcon="qrd:arrow-bottom"></mat-icon>
</button>
<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="trigger"
  [cdkConnectedOverlayOpen]="isOverlayAttached()"
  [cdkConnectedOverlayPositions]="overlayPositions()"
  [cdkConnectedOverlayScrollStrategy]="cdkConnectedOverlayScrollStrategy"
  [cdkConnectedOverlayWidth]="240"
  (overlayOutsideClick)="closeOverlay()"
  (detach)="detachOverlay()"
>
  <profile-info-overlay
    overlayAnimation
    [isOpen]="isOverlayOpen()"
    (animationDone)="onOverlayClosed()"
    [username]="selectors.authInfo()?.username ?? ''"
    [email]="selectors.authInfo()?.email ?? ''"
    (closeClick)="closeOverlay()"
    (closeOverlay)="closeOverlay()"
  />
</ng-template>
