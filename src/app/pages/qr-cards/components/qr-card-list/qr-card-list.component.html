@if (!selectors.isQrCardListLoading()) {
  @for (qrCard of selectors.qrCardList(); track qrCard.id) {
    @let code = qrCard.code | toHex;
    <view-list-item
      [title]="code"
      [navigateTo]="`../${qrCard.id}`"
      [isPreviewShown]="true"
      [isSelected]="selectionModel.isSelected(qrCard.id)"
      (checkboxChanged)="makeSelect(qrCard)"
    >
      <ng-container preview>
        @if (selectors.qrTableColumnVisibility().code_picture) {
          <qr-renderer [code]="code" [priority]="$index < 10" style="flex: 0 0 128px" />
        }
      </ng-container>
      <ng-container content>
        @if (selectors.qrTableColumnVisibility().name) {
          <p ellipsis>
            {{ qrCard.name | fallback: SharedLocalization.noName }}
          </p>
        }
        @if (selectors.qrTableColumnVisibility().description) {
          <p ellipsis>
            {{ qrCard.description | fallback: SharedLocalization.noDescription }}
          </p>
        }
      </ng-container>
      <ng-container menu-items>
        <a [routerLink]="`../${qrCard.id}`" [relativeTo]="activatedRoute" mat-menu-item>
          <mat-icon>outbound</mat-icon>
          {{ SharedLocalization.open }}
        </a>
        <button (click)="qrCardsService.openCardPreview(qrCard.qrCardPreviewUrl)" mat-menu-item>
          <mat-icon>eye_tracking</mat-icon>
          {{ QrCardsLocalization.previewCard }}
        </button>
        <a
          [href]="`${selectors.configState().config.qrdConf?.qrUri}?q=${code}`"
          target="_blank"
          rel="noopener noreferrer"
          mat-menu-item
        >
          <mat-icon>open_in_new</mat-icon>
          {{ QrCardsLocalization.viewCard }}
        </a>
        <button
          (click)="qrCardsService.copyToClipboard(`${selectors.configState().config.qrdConf?.qrUri}?q=${code}`)"
          mat-menu-item
        >
          <mat-icon>share</mat-icon>
          {{ SharedLocalization.share }}
        </button>
        <button (click)="qrCardsService.openPrint(code)" mat-menu-item>
          <mat-icon>print</mat-icon>
          {{ SharedLocalization.print }}
        </button>
        <a [routerLink]="`../${qrCard.code}/${AppRoutes.edit}`" [relativeTo]="activatedRoute" mat-menu-item>
          <mat-icon>edit</mat-icon>
          {{ SharedLocalization.edit }}
        </a>
        <button (click)="actions.deleteQrCards([qrCard.id], destroyRef)" mat-menu-item>
          <mat-icon>delete</mat-icon>
          {{ SharedLocalization.delete }}
        </button>
      </ng-container>
    </view-list-item>
  } @empty {
    <ui-alert
      [type]="selectors.isQrCardListLoadErr() ? 'danger' : 'info'"
      [icon]="selectors.isQrCardListLoadErr() ? 'error' : 'info'"
      [title]="
        selectors.isQrCardListLoadErr() ? ErrorsLocalization.errorFetchingCardList : SharedLocalization.emptyList
      "
      [isClosable]="false"
    >
      <ui-flex-block>
        <button
          (click)="actions.fetchQrCards(destroyRef)"
          class="button-lg"
          [class.button-error]="selectors.isQrCardListLoadErr()"
          mat-flat-button
        >
          {{ SharedLocalization.refresh }}
        </button>
      </ui-flex-block>
    </ui-alert>
  }
} @else {
  @for (sk of selectors.qrCardListSkeletonLoaders(); track sk) {
    <ui-skeleton [height]="skeletonHeight()" />
  }
}
