<ui-flex-block
  flexDirection="column"
  scrolledToLast
  [count]="selectors.fileList().length"
  [isListLoading]="selectors.isFileListLoading()"
  (isLast)="fetchMore()"
>
  @if (!selectors.isFileListLoading()) {
    @for (file of selectors.fileList(); track file.id) {
      <view-list-item
        [title]="file.name"
        [navigateTo]="`./${file.id}`"
        [isPreviewShown]="true"
        [isSelected]="selectionModel.isSelected(file.id)"
        (checkboxChanged)="$event ? selectionModel.select(file.id) : selectionModel.deselect(file.id)"
      >
        <ng-container content>
          <p ellipsis>
            {{ file.description | fallback: SharedLocalization.noDescription }}
          </p>
        </ng-container>
        <ng-container attributes>
          <ui-flex-block gapSize="4" flexAlignItems="center" flexWrap="wrap">
            <ui-badge>
              <small>{{ file.fileSize | bytesToSize }}</small>
            </ui-badge>
            <ui-badge>
              <small>{{ (file.updated | date: 'short') ?? '' }}</small>
            </ui-badge>
          </ui-flex-block>
        </ng-container>
        <ng-container menu-items>
          <a [routerLink]="`./${file.id}`" [relativeTo]="activatedRoute" mat-menu-item>
            <mat-icon>outbound</mat-icon>
            {{ SharedLocalization.open }}
          </a>
          <button mat-menu-item>
            <mat-icon>print</mat-icon>
            {{ SharedLocalization.print }}
          </button>
          <button mat-menu-item>
            <mat-icon>edit</mat-icon>
            {{ SharedLocalization.edit }}
          </button>
          <button mat-menu-item>
            <mat-icon>delete</mat-icon>
            {{ SharedLocalization.delete }}
          </button>
        </ng-container>
      </view-list-item>
    }
  } @else {
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
    <ui-skeleton height="72" />
  }
</ui-flex-block>
