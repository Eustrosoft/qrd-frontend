<ui-flex-block gapSize="8" flexAlignItems="center">
  @if (isSmallScreen()) {
    <button (click)="openSidenavMenu()" class="icon-button-sm" mat-icon-button>
      <ui-icon icon="sidenav" display="inline" />
    </button>
  }
  <qrd-logo routerLink="/">
    @if (!isSmallScreen()) {
      <p class="is-bold is-on-primary-container">{{ HeaderLocalization.qrForBusiness }}</p>
    }
  </qrd-logo>
</ui-flex-block>
<ui-flex-block flexAlignItems="center">
  @if (!isSmallScreen() && selectors.isAuthenticated()) {
    <mat-nav-list class="header-navbar">
      @for (link of selectors.navbarLinks().list; track link.title) {
        <a
          class="header-navbar-link"
          [activated]="rla.isActive"
          [routerLink]="link.route"
          #rla="routerLinkActive"
          routerLinkActive="active"
          mat-list-item
        >
          {{ link.title }}
        </a>
      }
    </mat-nav-list>
  }
  <ui-flex-block [gapSize]="actionsFlexGapSize()" flexAlignItems="center">
    @if (selectors.isAuthenticated()) {
      <button
        (click)="openCreateOverlay()"
        class="icon-button-sm"
        mat-icon-button
        cdkOverlayOrigin
        #createTrigger="cdkOverlayOrigin"
      >
        <ui-icon icon="grid-plus" cursor="pointer" display="inline" />
      </button>
      <ng-template
        cdkConnectedOverlay
        [cdkConnectedOverlayOrigin]="createTrigger"
        [cdkConnectedOverlayOpen]="isCreateOverlayOpen()"
        [cdkConnectedOverlayPositions]="overlayPositions()"
        [cdkConnectedOverlayScrollStrategy]="createOverlayScrollStrategy"
        [cdkConnectedOverlayWidth]="220"
        (overlayOutsideClick)="closeCreateOverlay()"
        (detach)="closeCreateOverlay()"
      >
        <create-menu-overlay
          [@transformPanel]="isCreateOverlayOpen() ? 'enter' : 'void'"
          (closeClick)="closeCreateOverlay()"
        />
      </ng-template>
    }
    <button
      (click)="openThemeOverlay()"
      class="icon-button-sm"
      mat-icon-button
      paletteAnimation
      cdkOverlayOrigin
      #themeTrigger="cdkOverlayOrigin"
    >
      <ui-icon icon="palette" cursor="pointer" display="inline" />
    </button>
    <ng-template
      cdkConnectedOverlay
      [cdkConnectedOverlayOrigin]="themeTrigger"
      [cdkConnectedOverlayOpen]="isThemeOverlayOpen()"
      [cdkConnectedOverlayPositions]="overlayPositions()"
      [cdkConnectedOverlayScrollStrategy]="themeOverlayScrollStrategy"
      [cdkConnectedOverlayWidth]="240"
      (overlayOutsideClick)="closeThemeOverlay()"
      (detach)="closeThemeOverlay()"
    >
      <theme-picker-overlay
        [@transformPanel]="isThemeOverlayOpen() ? 'enter' : 'void'"
        (closeClick)="closeThemeOverlay()"
      />
    </ng-template>
    @if (selectors.isAuthenticated()) {
      <mini-profile-info />
    } @else {
      <a routerLink="/login" class="button-md" mat-flat-button>{{ SharedLocalization.login }}</a>
    }
  </ui-flex-block>
</ui-flex-block>
@if (isSmallScreen()) {
  <bottom-navbar />
}
